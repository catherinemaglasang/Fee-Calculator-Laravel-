<?php

namespace Thirty98\API\Texas\Seeders;

use Illuminate\Support\Facades\DB;
use Thirty98\API\General\Entities\APISeeder;
use Thirty98\API\General\Models\County;
use Thirty98\API\General\Models\Fee;

class CountiesFees extends APISeeder
{
    /**
     * Run the database seeds.
     *
     * @return void
     */
    public function run()
    {
        try {
            DB::transaction(function () {

                $state = DB::table('states')->where('code', 'TX')->first();

                if (!$state) {
                    DB::table('states')->insert(['code' => 'TX', 'name' => 'Texas']);
                    $state = DB::table('states')->where('code', 'TX')->first();
                }

                DB::table('counties')->where('state_id', $state->id)->delete();

                $csv = '1,Anderson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                2,Andrews, $ 28.00 , $ 7.00 ,5/1/2014,12/31/2099;
                3,Angelina, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                4,Aransas, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                5,Archer, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                6,Armstrong, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                7,Atascosa, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                8,Austin, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                9,Bailey, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                10,Bandera, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                11,Bastrop, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                12,Baylor, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                13,Bee, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                14,Bell, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                15,Bexar, $ 33.00 , $ 21.50 ,5/1/2014,12/31/2099;
                16,Blanco, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                17,Borden, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                18,Bosque, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                19,Bowie, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                20,Brazoria, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                21,Brazos, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                22,Brewster, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                23,Briscoe, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                24,Brooks, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                25,Brown, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                26,Burleson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                27,Burnet, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                28,Caldwell, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                29,Calhoun, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                30,Callahan, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                31,Cameron, $ 28.00 , $ 20.00 ,5/1/2014,12/31/2099;
                32,Camp, $ 28.00 , $ 10.50 ,5/1/2014,12/31/2099;
                33,Carson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                34,Cass, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                35,Castro, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                36,Chambers, $ 33.00 , $ 11.00 ,5/1/2014,12/31/2099;
                37,Cherokee, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                38,Childress, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                39,Clay, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                40,Cochran, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                41,Coke, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                42,Coleman, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                43,Collin, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                44,Collingsworth, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                45,Colorado, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                46,Comal, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                47,Comanche, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                48,Concho, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                49,Cooke, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                50,Coryell, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                51,Cottle, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                52,Crane, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                53,Crockett, $ 28.00 , $ 5.00 ,5/1/2014,12/31/2099;
                54,Crosby, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                55,Culberson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                56,Dallam, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                57,Dallas, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                58,Dawson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                59,Deaf Smith, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                60,Delta, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                61,Denton, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                62,DeWitt, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                63,Dickens, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                64,Dimmit, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                65,Donley, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                66,Duval, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                67,Eastland, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                68,Ector, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                69,Edwards, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                70,Ellis, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                71,El Paso, $ 33.00 , $ 20.00 ,5/1/2014,12/31/2099;
                72,Erath, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                73,Falls, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                74,Fannin, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                75,Fayette, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                76,Fisher, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                77,Floyd, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                78,Foard, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                79,Fort Bend, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                80,Franklin, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                81,Freestone, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                82,Frio, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                83,Gaines, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                84,Galveston, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                85,Garza, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                86,Gillespie, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                87,Glasscock, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                88,Goliad, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                89,Gonzales, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                90,Gray, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                91,Grayson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                92,Gregg, $ 33.00 , $ 9.00 ,5/1/2014,12/31/2099;
                93,Grimes, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                94,Guadalupe, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                95,Hale, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                96,Hall, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                97,Hamilton, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                98,Hansford, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                99,Hardeman, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                100,Hardin, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                101,Harris, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                102,Harrison, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                103,Hartley, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                104,Haskell, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                105,Hays, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                106,Hemphill, $ 28.00 , $ 5.00 ,5/1/2014,12/31/2099;
                107,Henderson, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                108,Hidalgo, $ 28.00 , $ 20.00 ,5/1/2014,12/31/2099;
                109,Hill, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                110,Hockley, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                111,Hood, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                112,Hopkins, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                113,Houston, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                114,Howard, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                115,Hudspeth, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                116,Hunt, $ 33.00 , $ 11.00 ,5/1/2014,12/31/2099;
                117,Hutchinson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                118,Irion, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                119,Jack, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                120,Jackson, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                121,Jasper, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                122,Jeff Davis, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                123,Jefferson, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                124,Jim Hogg, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                125,Jim Wells, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                126,Johnson, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                127,Jones, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                128,Karnes, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                129,Kaufman, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                130,Kendall, $ 28.00 , $ 11.00 ,5/1/2014,12/31/2099;
                131,Kenedy, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                132,Kent, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                133,Kerr, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                134,Kimble, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                135,King, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                136,Kinney, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                137,Kleberg, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                138,Knox, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                139,Lamar, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                140,Lamb, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                141,Lampasas, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                142,La Salle, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                143,Lavaca, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                144,Lee, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                145,Leon, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                146,Liberty, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                147,Limestone, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                148,Lipscomb, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                149,Live Oak, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                150,Llano, $ 28.00 , $ 10.75 ,5/1/2014,12/31/2099;
                151,Loving, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                152,Lubbock, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                153,Lynn, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                154,Madison, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                155,Marion, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                156,Martin, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                157,Mason, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                158,Matagorda, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                159,Maverick, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                160,McCulloch, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                161,McLennan, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                162,McMullen, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                163,Medina, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                164,Menard, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                165,Midland, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                166,Milam, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                167,Mills, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                168,Mitchell, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                169,Montague, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                170,Montgomery, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                171,Moore, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                172,Morris, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                173,Motley, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                174,Nacogdoches, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                175,Navarro, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                176,Newton, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                177,Nolan, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                178,Nueces, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                179,Ochiltree, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                180,Oldham, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                181,Orange, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                182,Palo Pinto, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                183,Panola, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                184,Parker, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                185,Parmer, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                186,Pecos, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                187,Polk, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                188,Potter, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                189,Presidio, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                190,Rains, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                191,Randall, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                192,Reagan, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                193,Real, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                194,Red River, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                195,Reeves, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                196,Refugio, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                197,Roberts, $ 28.00 , $ 5.00 ,5/1/2014,12/31/2099;
                198,Robertson, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                199,Rockwall, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                200,Runnels, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                201,Rusk, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                202,Sabine, $ 28.00 , $ 11.00 ,5/1/2014,12/31/2099;
                203,San Augustine, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                204,San Jacinto, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                205,San Patricio, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                206,San Saba, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                207,Schleicher, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                208,Scurry, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                209,Shackelford, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                210,Shelby, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                211,Sherman, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                212,Smith, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                213,Somervell, $ 28.00 , $ 5.00 ,5/1/2014,12/31/2099;
                214,Starr, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                215,Stephens, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                216,Sterling, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                217,Stonewall, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                218,Sutton, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                219,Swisher, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                220,Tarrant, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                221,Taylor, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                222,Terrell, $ 28.00 , $ 5.00 ,5/1/2014,12/31/2099;
                223,Terry, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                224,Throckmorton, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                225,Titus, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                226,Tom Green, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                227,Travis, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                228,Trinity, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                229,Tyler, $ 28.00 , $ 11.00 ,5/1/2014,12/31/2099;
                230,Upshur, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                231,Upton, $ 28.00 , $ 5.00 ,5/1/2014,12/31/2099;
                232,Uvalde, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                233,Val Verde, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                234,Van Zandt, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                235,Victoria, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                236,Walker, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                237,Waller, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                238,Ward, $ 28.00 , $ -   ,5/1/2014,12/31/2099;
                239,Washington, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                240,Webb, $ 28.00 , $ 20.00 ,5/1/2014,12/31/2099;
                241,Wharton, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                242,Wheeler, $ 28.00 , $ 6.50 ,5/1/2014,12/31/2099;
                243,Wichita, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                244,Wilbarger, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                245,Willacy, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                246,Williamson, $ 33.00 , $ 11.50 ,5/1/2014,12/31/2099;
                247,Wilson, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                248,Winkler, $ 28.00 , $ 7.50 ,5/1/2014,12/31/2099;
                249,Wise, $ 33.00 , $ 10.00 ,5/1/2014,12/31/2099;
                250,Wood, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                251,Yoakum, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                252,Young, $ 28.00 , $ 10.00 ,5/1/2014,12/31/2099;
                253,Zapata, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099;
                254,Zavala, $ 28.00 , $ 11.50 ,5/1/2014,12/31/2099';

                $records = explode(";", $csv);

                foreach ($records as $record) {

                    // Prepare data.
                    $record = trim($record);
                    $record = explode(',', $record);
                    $countyName = str_replace(' ', '_', trim($record[1]));
                    $titleFee = floatval(trim(str_replace('$', '', $record[2])));
                    $localFee = floatval(trim(str_replace('$', '', $record[3])));
                    $fees = [
                        ['name' => 'TITLE_FEE', 'type' => 'fee', 'amount' => $titleFee],
                        ['name' => 'LOCAL_FEE', 'type' => 'fee', 'amount' => $localFee]
                    ];

                    // Add county
                    $county = DB::table('counties')->where('name',
                        $countyName)->where('state_id',
                        $state->id)->first();

                    if (!$county) {
                        $county = new County;
                        $county->state_id = $state->id;
                        $county->name = $countyName;
                        $county->code = strtoupper($countyName);
                        $county->save();
                    }

                    foreach ($fees as $f) {

                        $fee = DB::table('fees')->where('name', $f['name'])->where('type',
                            $f['type'])->first();

                        if (!$fee) {
                            $fee = new Fee();
                            $fee->name = $f['name'];
                            $fee->type = $f['type'];
                            $fee->save();
                        }

                        // Get all categories types relatioships.
                        $categoriesTypes = DB::table('categories_types')->get();

                        foreach ($categoriesTypes as $categoryType) {
                            $countyFee = DB::table('counties_fees')->where('county_id',
                                $county->id)->where('fee_id', $fee->id)->where('category_type_id', $categoryType->id)->first();

                            if (!$countyFee) {
                                $input = [
                                    'county_id' => $county->id,
                                    'fee_id' => $fee->id,
                                    'category_type_id' => $categoryType->id,
                                    'amount' => $f['amount']
                                ];
                                DB::table('counties_fees')->insert($input);
                            } else {
                                DB::table('counties_fees')
                                    ->where('category_type_id', $categoryType->id)
                                    ->where('fee_id', $fee->id)
                                    ->where('county_id', $county->id)
                                    ->update(['amount' => $f['amount']]);
                            }
                        }
                    }
                }
            });
        } catch (Exception $e) {
            Log::error($e);
            $this->command->error($e->getMessage());
        }
    }
}
